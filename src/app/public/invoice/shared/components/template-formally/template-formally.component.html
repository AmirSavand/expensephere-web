<!-- Contained -->
<div class="container">

  <!-- Invoice -->
  <div #snapshotElement [class.snapshot-mode]="snapshotLoading" class="invoice row shadow-sm">

    <!-- Left -->
    <div class="col-md-8">
      <!-- Items table -->
      <table class="table table-borderless">
        <thead>
        <tr>
          <th>{{ invoice.items_label || "Tasks" }}</th>
          <th class="text-end">Price</th>
          <th class="text-end">Quantity</th>
          <th class="text-end">Total</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let item of invoice.items">
          <td>{{ item.description }}</td>
          <td class="text-end">{{ item.price | profileCurrency:invoice.currency }}</td>
          <td class="text-end">{{ item.quantity | number }}</td>
          <td class="text-end">{{ item.quantity * item.price | profileCurrency:invoice.currency }}</td>
        </tr>
        </tbody>
      </table>

      <!-- Separator -->
      <hr class="my-4">

      <!-- Notes, total, subtotal, tax, discount -->
      <div class="row">
        <div class="col-md-7 mb-3 mb-md-0">
          <p class="fw-bold text-muted">Notes</p>
          <div class="text-pre">{{ invoice.note || 'There are no notes.' }}</div>
        </div>
        <div class="col-md-5">
          <table class="table table-borderless text-end">
            <tbody>
            <tr *ngIf="invoice.discount !== null || invoice.tax !== null">
              <th>Subtotal</th>
              <td>{{ invoice.subtotal | profileCurrency:invoice.currency }}</td>
            </tr>
            <tr *ngIf="invoice.discount !== null">
              <th>Discount</th>
              <td *ngIf="invoice.discount_flat">{{ invoice.discount | profileCurrency:invoice.currency }}</td>
              <td *ngIf="!invoice.discount_flat">{{ invoice.discount | number:'0.0-2' }}%</td>
            </tr>
            <tr *ngIf="invoice.tax !== null">
              <th>Tax</th>
              <td>{{ invoice.tax | number:'0.0-2' }}%</td>
            </tr>
            <tr [class.border-top]="invoice.discount !== null || invoice.tax !== null" class="h4">
              <th>Total</th>
              <td>{{ invoice.total | profileCurrency:invoice.currency }}</td>
            </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Right -->
    <div class="col-md-4">

      <!-- Invoice info -->
      <div class="border bg-light rounded p-2 mt-2">

        <!-- Invoice number -->
        <div class="row">
          <span class="col-6 fw-bold text-muted">Invoice</span>
          <span class="col-6 fw-bold">{{ invoice.invoice_id }}</span>
        </div>

        <!-- Invoice type -->
        <div *ngIf="!snapshotLoading" class="row mt-2">
          <div class="col-6 fw-bold text-muted">Invoice Type</div>
          <div class="col-6">
            <span class="private">{{ !invoice.is_published ? 'PRIVATE' : 'PUBLIC' }}</span>
          </div>
        </div>

        <!-- Company -->
        <div class="row mt-2">
          <span class="col-6 fw-bold text-muted">Company</span>
          <span class="col-6 fw-bold">{{ invoice.company.name }}</span>
        </div>

        <!-- Client -->
        <div class="row mt-2">
          <span class="col-6 fw-bold text-muted">Client</span>
          <span class="col-6 fw-bold">{{ invoice.client.name }}</span>
        </div>
      </div>

      <!-- Date & Due date -->
      <div *ngIf="invoice.date || invoice.due_date" class="border bg-light rounded p-2 mt-2">
        <div *ngIf="invoice.date" class="row">
          <span class="col-6 fw-bold text-muted td">Date</span>
          <span class="col-6 fw-bold">{{ invoice.date | date }}</span>
        </div>
        <div *ngIf="invoice.due_date" class="row mt-2">
          <span class="col-6 fw-bold text-muted">Due Date</span>
          <span class="col-6 fw-bold">{{ invoice.due_date | date }}</span>
        </div>
      </div>

      <!-- Payment detail -->
      <div class="border bg-light rounded p-2 mt-2">

        <!-- Payment status -->
        <div *ngIf="invoice.is_paid !== null" class="row mt-2">
          <div class="col-6 fw-bold text-muted">Payment Status</div>
          <div class="col-6">
            <span class="private">{{ invoice.is_paid ? 'PAID' : 'NOT PAID' }}</span>
          </div>
        </div>

        <!-- Total -->
        <div class="row mt-2">
          <div class="col-6 fw-bold text-muted">Total</div>
          <div class="col-6">
            <div class="private">{{ invoice.total | profileCurrency:invoice.currency }}</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
