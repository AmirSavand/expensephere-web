<div>
  <div class="container pt-3">

    <!-- Header -->
    <div class="d-flex align-items-center mb-3">

      <!-- Title -->
      <p class="fw-bold mb-0">Export Transactions</p>

      <!-- Info -->
      <div class="ms-auto badge bg-info badge-pill px-3"
           title="Number of transactions by your selected filters and dates.">
        <b>{{ count >= 0 ? (count | number) : '...' }}</b> Selected
      </div>
    </div>

    <!-- Cards -->
    <div class="row">

      <!-- Filters -->
      <div class="col-lg-4">
        <mat-card class="card h-100 pb-3">
          <mat-card-title>Select Filters</mat-card-title>
          <mat-card-content>
            <mat-card-subtitle>
              Filter what transactions you want to include for exporting.
            </mat-card-subtitle>
            <app-filters (update)="filtersSelected = $event; load()" [filters]="filters"></app-filters>
            <button mat-stroked-button (click)="filtersSelected = {}; load()" class="w-100 mt-3">
              Clear Filters
            </button>
          </mat-card-content>
        </mat-card>
      </div>

      <!-- Date -->
      <div class="col-lg-4">
        <mat-card class="h-100 pb-3">
          <mat-card-title>Select Date Range</mat-card-title>
          <mat-card-content>
            <mat-card-subtitle>
              Include transactions between specific dates. Dates are ignored if they are not set.
            </mat-card-subtitle>
            <mat-form-field class="w-100">
              <mat-label>From</mat-label>
              <input matInput
                     (change)="load()"
                     [(ngModel)]="from"
                     type="date">
            </mat-form-field>

            <mat-form-field class="w-100">
              <mat-label>To</mat-label>
              <input matInput (change)="load()"
                     [(ngModel)]="to"
                     type="date">
            </mat-form-field>

            <button mat-stroked-button (click)="from = null; to = null; load()"
                    [disabled]="!from && !to"
                    class="w-100">
              Clear Dates
            </button>
          </mat-card-content>
        </mat-card>
      </div>

      <!-- Export -->
      <div class="col-lg-4">
        <mat-card class="h-100 pb-3">
          <mat-card-title>Select Export Type</mat-card-title>
          <mat-card-content>
            <mat-card-subtitle>Select what kind of file you want to export your transactions to.</mat-card-subtitle>
            <button mat-flat-button (click)="submit(option)"
                    *ngFor="let option of options; let first = first"
                    [class.mt-2]="!first"
                    class="btn btn-primary w-100">
              {{ option.label }}
            </button>
            <hr>
            <a mat-flat-button-button class="btn btn-dark w-100" routerLink="../pages">Mange Public Pages</a>
          </mat-card-content>
        </mat-card>
      </div>
    </div>
  </div>
</div>


